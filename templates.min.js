!function(t){"function"==typeof define&&define.amd&&define(["module","lodash"],function(n,e){n.exports=t({},e)}),"object"==typeof exports&&(module.exports=t({},require("lodash")))}(function(t,n){return"object"==typeof exports&&!function(n,e,r){t.compile=function(t,r){var i=new n(r,module);return i.filename=r,i.paths=n._nodeModulePaths(e.dirname(r)),i._compile(t,r),i.loaded=!0,i.T},t.include=function(t){var n=e.dirname(r()[1].getFileName()),i=e.normalize(e.join(n,t));return require.cache[i]&&delete require.cache[i],require(i)}}(require("module"),require("path"),require("callsite")),t["static"]=function(){var t=this,n=arguments;for(var e in n)!function(e){t[n[e]]=function(){var r=t.construct();return r[n[e]].apply(r,arguments)}}(e)},function(){t.sync=function(t){var n=function(){return t()};return n.__templatesSync=!0,n.toString=function(){return n()},n},t.isSyncFunction=function(t){return!!t.__templatesSync}}(),function(){t.async=function(t){var e=function(e){var r=!1;t(function(t,i){if(r)throw new Error("Repeated call callback unexpected!");r=!0,n.isFunction(e)&&e(t,i)})};return e.__templatesAsync=!0,e.toString=function(){var t=new Error("Asynchrony can not be converted into synchronicity!");if(e(function(n,e){if(n)throw n;t=e}),n.isObject(t)&&t instanceof Error)throw t;return t},e},t.isAsyncFunction=function(t){return!!t.__templatesAsync}}(),function(){t.Prototype=function(){this._parent=void 0,this._arguments=void 0,this.returner=function(){return this},this.constructor=function(){},this.extend=function(){function e(){if(!(this instanceof t.Prototype)){a=arguments;var r=new e;return r.returner(r)}if(n.isArguments(a)){var s=a;a=void 0}else var s=arguments;this._parent=u,this._arguments=s,i.call(this),n.isFunction(this.constructor)&&this.constructor.apply(this,s)}var r=arguments,i=function(){for(var t in r)n.isFunction(r[t])&&r[t].call(this)},s=[];for(var o in arguments)n.isString(arguments[o])&&s.push(arguments[o]);if(s.length>0)var u=this.extend(function(){var n=this._parent;this._static=function(){n._static.call(this),t["static"].apply(this,s)}}).construct();else var u=this;var a=void 0;return e.prototype=u,n.isFunction(u._static)&&u._static.call(e),e},this._static=function(){this.toString=function(){return""},this.construct=function(){return this.apply(this,arguments)},t["static"].call(this,"extend")}}}(),function(){t.Data=(new t.Prototype).extend("render","_render","toString","prepend","data","append",function(){var e=this._parent;this._data=void 0,this.prepend=function(){return this._data.unshift.apply(this._data,arguments),this},this.data=function(){return this._data=Array.prototype.slice.call(arguments),this},this.append=function(){return this._data.push.apply(this._data,arguments),this},this._context={},this.context=function(){for(var t in arguments)n.extend(this._context,arguments[t]);return this},this.constructor=function(){e.constructor.call(this),this._data=[],n.isArray(this._parent._data)&&(this._data=this._parent._data.slice(0)),this._context={}},this.render=function(){var e=!1,r={};for(var i in arguments)n.isFunction(arguments[i])?e=arguments[i]:n.isObject(arguments[i])&&n.extend(r,arguments[i]);e&&this._render(e,r);var s=this;return t.async(function(t){s._render(t,r)})},this._render=function(e,r){var i=n.extend({},this._context);n.extend(i,r),t.render(this._data,function(n,r){n?e(n):t.render(i,function(n,i){n?e(n):t.renderContext(r.join(""),i,e)},i)},i)},this.toString=function(){return String(this.render())}}),t.data=t.Data.extend(function(){var t=this._parent;this.constructor=function(){t.constructor.apply(this),this.data.apply(this,arguments)}})}(),function(){t.Tag=t.Data.extend("name","attributes","selector",function(){var e=this._parent;this._name=null,this.name=function(t){return this._name=t,this},this._attributes={},this.attributes=function(t){return n.extend(this._attributes,t),this},this.selector=function(n){return t.renderSelector(this._attributes,n),this},this.constructor=function(){e.constructor.call(this),this._attributes=n.isObject(this._parent._attributes)?n.extend({},this._parent._attributes):{};for(var t in arguments)n.isString(arguments[t])?this.selector(arguments[t]):n.isObject(arguments[t])&&this.attributes(arguments[t])},this._renderTag=function(t,n,e,r){r(null,n)},this._render=function(n,r){var i=this;e._render.call(i,function(e,s){e?n(e):t.renderAttributes(i._attributes,function(t,e){t?n(t):i._renderTag(i._name,s,e,n)},r)},r)}})}(),function(){t.Single=t.Tag.extend(function(){this._renderTag=function(t,n,e,r){r(null,"<"+t+e+"/>")}})}(),function(){t.Double=t.Tag.extend(function(){this.construct=function(){return this()()},this._renderTag=function(t,n,e,r){r(null,"<"+t+e+">"+n+"</"+t+">")},this.returner=function(){var t=this;return t.extend(function(){this.constructor=function(){arguments.length>0&&t.data.apply(t,arguments)},this.returner=function(){return t}})}})}(),function(){t.Doctype=t.Tag.extend(function(){this._name="DOCTYPE",this._renderTag=function(t,n,e,r){r(null,"<!"+t+e+">")}})}(),function(){t.xml=t.Tag.extend(function(){this._name="xml",this._renderTag=function(t,n,e,r){r(null,"<?"+t+e+"?>")}})}(),function(){t._singles=["br","hr","img","input","base","frame","link","meta","style"],t.singles={};for(var n in t._singles)t.singles[t._singles[n]]=t.Single().name(t._singles[n]).extend()}(),function(){t._doubles=["html","body","head","h1","h2","h3","h4","h5","h6","hgroup","div","p","address","blockquote","pre","ul","ol","li","dl","dt","dd","fieldset","legend","form","noscript","object","table","thead","tbody","tfoot","tr","td","th","col","colgroup","caption","span","b","big","strong","i","var","cite","em","q","del","s","strike","tt","code","kbd","samp","small","sub","sup","dfn","bdo","abbr","acronym","a","button","textarea","select","option","article","aside","figcaption","figure","footer","header","section","main","nav","menu","audio","video","embed","canvas","output","details","summary","mark","meter","progress","template","comment","title","script"],t.doubles={};for(var n in t._doubles)t.doubles[t._doubles[n]]=t.Double()().name(t._doubles[n]).extend()}(),function(){t.Mixin=t.Data().extend(),t.mixin=function(e){if(!n.isFunction(e))throw new Error("reconstructor must be a function");return t.Mixin().extend(function(){var t=this._parent;this.constructor=function(){t.constructor.apply(this),this.data(e.apply(this,arguments))}})}}(),function(){t.render=function(e,r,i){n.isFunction(e)?t.isSyncFunction(e)?r(null,e()):t.isAsyncFunction(e)?e(function(t,n){r(t,n)}):e.prototype instanceof t.Data?e._render(r,i):r(null,e):n.isObject(e)&&e instanceof t.Data?e._render(r,i):r(null,e)},t.renderContext=function(t,e,r){r(null,n.template(t,e))},t.renderAttributes=function(e,r,i){t.render(e,function(t,e){if(t)r(t);else{var i="";for(var s in e)i+=n.isNull(e[s])?" "+s:" "+s+'="'+e[s]+'"';r(null,i)}},i)},t.regExpSearch=function(t,n){for(var e=[],r=null;null!=(r=n.exec(t));)r.index===n.lastIndex&&n.lastIndex++,e.push(r);return e},t._renderSelectorRegExp=/(\[)|(\])|#([-\w\d]+)|\.([-\w\d]+)|([\w\d-]+)="(['\w\d\s-:\\\/\.\,\]\[={}<>%@#$%^&*~`]*)"|([\w\d-]+)='(["\w\d\s-:\\\/\.\,\]\[={}<>%@#$%^&*~`]*)'|([\w\d-]+)=([\w\d-:\\\/\.={}<>%@#$%^&*~`]*)|("['\w\d\s-:\\\/\.\,\]\[={}<>%@#$%^&*~`]+")|('["\w\d\s-:\\\/\.\,\]\[={}<>%@#$%^&*~`]+')|([_\w-:\\\/]+)/g,t.renderSelector=function(e,r){var i=t.regExpSearch(r,t._renderSelectorRegExp),s=!1;n.each(i,function(t){if(t[1])return void(s=!0);if(t[2])return void(s=!1);if(s){if(t[9])return void(e[t[9]]=t[10]);if(t[7])return void(e[t[7]]=t[8]);if(t[5])return void(e[t[5]]=t[6]);if(t[13])return void(e[t[13]]=null);if(t[12])return void(e[t[12]]=null);if(t[11])return void(e[t[11]]=null)}else{if(t[3])return void(e.id=t[3]);if(t[4])return void(e["class"]?e["class"]+=" "+t[4]:e["class"]=t[4])}})}}(),t});